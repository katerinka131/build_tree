***Без ограничения на цвета стрелок от каждого узла***

1. Строим кратчайший путь от корня до каждого листа и сортируем все эти пути по длине
2. Достраиваем самый длинный путь от корня к листу 
3. Для каждого последующего пути до листа делаем следующее:

1) Просматриваем среди проставленных узлов есть ли узел, который совпадает с каким нибудь узлом в пути, который хотим поставить, если нашли тогда проверяем меньше ли 3 стрелок отходит от этого узла, если да, то достраиваем путь, если нет, то проверяем сколько стрелок отходит от корня, если 3, то переходим к 2)
2) Строим от всех поставленных узлов(от которых меньше 3 стрелки исходит) заново кратчайшие пути до этого листа(суммируя с глубиной узла от которого строим путь). Находим кратчайший путь и ставим.



***Изменения с ограничением цвета стрелок***

Местоположение стрелок в путях : Чередование стрелок УДАЛИТЬ и ЗАМЕНИТЬ

Проверка не только на 3 стрелки, но и на цвета стрелок

Для каждого листа проверяем все узлы смотря подходят ли следующие стрелки для этого 

Предположим мы дошли до листа который мы не можем никак добавить, потому что цвта стрелок не позволяют, тогда начиная от корня и спускаясь вниз по глубине мы ищем узел от которого не исходит 3 стрелки. Допустим мы нашли его, тогда мы смотрим какого цвета стрелки нет(пусть сначала проверяем на наличие красной, потом зелёной а потом синей), дальше в зависимости от цвета стрелки которой нет у этого узла мы добавляем стрелку этого цвета и относительно слова которое на нём было делаем:
1.если это зелёная, то добавляем на конец последний символ в этом слове
2. если это красная, то удаляем последний символ
3. если это синяя, то заменяем последний символ на предпоследний

далее от уже получившегося нового узла строим кратчайший путь до листа и строим его